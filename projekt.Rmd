---
title: "Avtomobilizem v Evropi"
author: "Jaka Munda"
output:
  html_document: default
  pdf_document:
    includes:
      in_header: lib/styles.sty
    latex_engine: xelatex
---

```{r setup, echo=FALSE, results='hide', message=FALSE}
# Če želimo nastaviti pisave v PDF-ju, odkomentiramo
# in sledimo navodilom v programu.
#source("fontconfig.r", encoding = "UTF-8")

# Uvoz vseh potrebnih knjižnic
source("lib/libraries.r", encoding = "UTF-8")
```

# Izbira teme

V projektu bom obravnaval značilnosti avtomobilizma v Evropi in napovedal trende avtomobilizma za prihodnjih nekaj let. Pri tem bom obravnaval starost, težo, velikost motorjev, koliko emisij izpustijo v okolje ter kakšne vrste goriv uporabljajo. Prav tako bom pogledal razširjenost avtomobilov in avtomobilskih znamk v Evropi ter kakšna bo ta v prihodnosti.

***

# Obdelava, uvoz in čiščenje podatkov

```{r uvoz, echo=FALSE, message=FALSE}
source("uvoz/uvoz.r", encoding = "UTF-8")
```
Podatke sem uvozil v obliki CSV z erostata ter v obliki HTML z http://carsalesbase.com/european-car-sales-data/.
Podatke imam v večih razpredelnicah v obliki *tidy data*.

Velikost motorja - podatki o velikostih motorjev v avtomobilih po državah

- 1.stolpec: Država - spremenljivka
- 2.stolpec: Leto - spremenljivka
- 3.stolpec: Vrsta goriva - spremenljivka: dizel ali bencin
- 4.stolpec: Velikost motorja - spremenljivka: 4 različne velikosti motorjev
- 5.stolpec: Število - meritev

Teža avtomobilov - podatki o teži avtomobilov

- 1.stolpec: Država - spremenljivka
- 2.stolpec: Leto - spremenljivka
- 3.stolpec: Teža - spremenljivka: 4 razredi za težo
- 4.stolpec: Število - meritev

Vrste goriv - podatki o tem kakšne vrste goriva uporabljajo v posameznih državah
- 1.stolpec: Država - spremenljivka
- 2.stolpec: Leto - spremenljivka
- 3.stolpec: Vrsta goriva - spremenljivka: 5 različnih vrst goriva obravnavam
- 4.stolpec: Število - meritev

Starost avtomobilov - podatki o starostih avtomobilov po državah

- 1.stolpec: Država - spremenljivka
- 2.stolpec: Leto - spremenljivka
- 3.stolpec: Starost - spremenljivka: 4 starostni razredi
- 4.stolpec: Število - meritev

Emisije CO2 novih avtomobilov - podatki o emisijah CO2 po posameznih državah

- 1.stolpec: Država - spremenljivka
- 2.stolpec: Leto - spremenljivka
- 3.stolpec: Gram CO2 na km - meritev

Število avtomobilov na 1000 prebivalcev - podatki o razširjenosti avtomobilov po evropskih državah

- 1.stolpec: Država - spremenljivka
- 2.stolpec: Leto - spremenljvka
- 3.stolpec: Število - meritev: število avtomobilov na 1000 prebivalcev

Avtomobilske znamke - podatki o prodajanosti posameznih avtomobilskih znamk

- 1.stolpec: Avtomobilska znamka - spremenljivka
- 2.stolpec: Leto - spremenljivka
- 3.stolpec: Število prodanih avtomobilov - meritev
- 4.stolpec: Delež na trgu - meritev: delež prodanih avtomobilov na trgu


Spodnji graf prikazuje porazdelitev števila naselij v občinah.

```{r histogram, echo=FALSE, message=FALSE, fig.align='center', fig.cap='Histogram števila naselij v občinah'}
ggplot(obcine, aes(x = naselja)) + geom_histogram() +
  ggtitle("Pogostost števila naselij") + xlab("Število naselij") + ylab("Število občin")
```

***

# Analiza in vizualizacija podatkov

```{r vizualizacija, echo=FALSE, message=FALSE, warning=FALSE}
source("vizualizacija/vizualizacija.r", encoding = "UTF-8")
```







Spodnji zemljevid prikazuje povprečno velikost družine za vsako občino.

```{r zemljevid, echo=FALSE, fig.align='center', fig.cap='Zemljevid povprečnega števila otrok v družini'}
ggplot() + geom_polygon(data = left_join(zemljevid, povprecja, by = c("OB_UIME" = "obcina")),
                        aes(x = long, y = lat, group = group, fill = povprecje)) +
  ggtitle("Povprečno število otrok v družini") + xlab("") + ylab("") +
  guides(fill = guide_colorbar(title = "Povprečje"))
```

***


